# Flatfish-BM
Flatfish-Benchmark (Flatfish-BM) is a benchmark set, which consists of physical address traces with different access patterns. Each physical address has 27 valid bits, which contain 3-bit Bank ID, 14-bit Row ID and 10-bit Column ID.

## Details
### Kernel Patterns
Flatfish-BM includes address traces with five typical memory access patterns: 
- **Sequential**：We use small-scale matrix multiplication as the representative application，and all the input/output data are accessed in a sequential manner.
- **Random**: We use Sorting algorithms on randomly generated data as the representative application.
- **Stride**: The address traces are generated by image rotation. Image rotation is a very typical and important application in image processing.
- **Non-overlap Window**: We use address traces of tile-based matrix multiplication. Matrix multiplication is an important operation in massive applications, and tile-based processing is a common technique for large-scale matrix multiplication.
- **Overlap Window**：The address traces are generated by two-dimensional convolution, which is one of the most important operations in convolutional neural networks.

Address traces of **Stride**, **Non-overlap Window** and **Overlap Window** are further divided into two subsets (**small** and **large**) by the size of image, tile and feature map, respectively.

### Real-world Workloads
Flatfish-BM also includes address traces of three typical neural network models (inference only):
- **ResNet-34**: A typical Convolutional Neural Network (CNN), which is widely employed in computer vision.
- **Seq2Seq**: A typical Recurrent Neural Network (RNN), which is widely employed in natural language processing.
- **GGS-NN**: A typical Graph Neural Network (GNN), which is widely employed in graph processing.

In ``Flatfish-BM/traces/``, all the address traces are saved in a compressed format of numpy (``.npz``). Currently, the address traces are extracted from our full benchmark set. The full benchmark set contains several GB of data, and we will upload the full benchmark set later.

## Usage
For example, we can load the address trace file in python3 by:

```python3
import numpy as np
trace=np.load("rotate_large.npz")['arr_0']
```
